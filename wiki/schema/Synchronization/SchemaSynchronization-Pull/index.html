<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Pull - LambdaORM Wiki</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">LambdaORM Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">λORM "We don't reinvent the wheel, we improve it"</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Features/" class="nav-link">Features</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Sidebar/" class="nav-link">Sidebar</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Usage/" class="nav-link">Usage</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../function_functions/" class="nav-link">Function functions</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../operator_operators/" class="nav-link">Operator operators</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Queries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../queries/Expression/" class="dropdown-item">Lambda expressions</a>
</li>
                                    
<li>
    <a href="../../../queries/Metadata/" class="dropdown-item">Metadata</a>
</li>
                                    
<li>
    <a href="../../../queries/Query-Language/" class="dropdown-item">Query Language</a>
</li>
                                    
<li>
    <a href="../../../queries/Repository/" class="dropdown-item">Repositories</a>
</li>
                                    
<li>
    <a href="../../../queries/Transaction/" class="dropdown-item">Transaction</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Dml</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../queries/dml/BulkInsert/" class="dropdown-item">BulkInsert</a>
</li>
            
<li>
    <a href="../../../queries/dml/Delete/" class="dropdown-item">Delete</a>
</li>
            
<li>
    <a href="../../../queries/dml/Insert/" class="dropdown-item">Insert</a>
</li>
            
<li>
    <a href="../../../queries/dml/Update/" class="dropdown-item">Update</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Dql</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../queries/dql/Grouping/" class="dropdown-item">Grouping</a>
</li>
            
<li>
    <a href="../../../queries/dql/Include/" class="dropdown-item">Include</a>
</li>
            
<li>
    <a href="../../../queries/dql/Join/" class="dropdown-item">Join</a>
</li>
            
<li>
    <a href="../../../queries/dql/Select/" class="dropdown-item">Select</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">operatorsAndFunctions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Bitwise/" class="dropdown-item">Bitwise</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Comparison/" class="dropdown-item">Comparison</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Datetime/" class="dropdown-item">Datetime</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Group/" class="dropdown-item">Group</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Logical/" class="dropdown-item">Logical</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Nullable/" class="dropdown-item">Nullable</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Numeric/" class="dropdown-item">Numeric</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/Sort/" class="dropdown-item">Sort</a>
</li>
            
<li>
    <a href="../../../queries/operatorsAndFunctions/String/" class="dropdown-item">String</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Schema <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Schema-Use/" class="dropdown-item">Schema Use</a>
</li>
                                    
<li>
    <a href="../../Schema/" class="dropdown-item">Schema</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Definition</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Definition/SchemaDefinition-Composite/" class="dropdown-item">Composite Entity</a>
</li>
            
<li>
    <a href="../../Definition/SchemaDefinition-EnvironmentVariables/" class="dropdown-item">Environment Variables on Schema</a>
</li>
            
<li>
    <a href="../../Definition/SchemaDefinition-Expressions/" class="dropdown-item">Expressions on Schema</a>
</li>
            
<li>
    <a href="../../Definition/SchemaDefinition/" class="dropdown-item">Definition</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Examples</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Examples/SchemaExample-Basic/" class="dropdown-item">Basic Schema Example</a>
</li>
            
<li>
    <a href="../../Examples/SchemaExample-Composite/" class="dropdown-item">Composite Entity</a>
</li>
            
<li>
    <a href="../../Examples/SchemaExample-Extend/" class="dropdown-item">Extend</a>
</li>
            
<li>
    <a href="../../Examples/SchemaExample-Listener/" class="dropdown-item">Listener on Schema</a>
</li>
            
<li>
    <a href="../../Examples/SchemaExample-MultiplesStages/" class="dropdown-item">Multiples Stages</a>
</li>
            
<li>
    <a href="../../Examples/SchemaExample-StageMultiplesSources/" class="dropdown-item">Stage related multiples Sources</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Synchronization</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../SchemaSynchronization-Fetch/" class="dropdown-item">Fetch</a>
</li>
            
<li>
    <a href="../SchemaSynchronization-Incorporate/" class="dropdown-item">Incorporate</a>
</li>
            
<li>
    <a href="../SchemaSynchronization-Introspect/" class="dropdown-item">Introspect</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Pull</a>
</li>
            
<li>
    <a href="../SchemaSynchronization-Push/" class="dropdown-item">Push</a>
</li>
            
<li>
    <a href="../SchemaSynchronization/" class="dropdown-item">Synchronization</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../SchemaSynchronization-Introspect/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../SchemaSynchronization-Push/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#pull" class="nav-link">Pull</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#cli" class="nav-link">CLI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#node" class="nav-link">Node</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="pull">Pull</h1>
<p>The pull is the process of updating the schema defined in the configuration file with the structure in the sources (Databases). The pull process is done by the command <code>lambdaorm pull</code>.</p>
<h2 id="cli">CLI</h2>
<p>The pull command is used to update the schema with respect to the sources (Databases). \
Once executed, the schema will be synchronized with the database. \
It also adds a file with the pulling scripts. \</p>
<p>Running the pull command:</p>
<pre><code class="language-sh">lambdaorm pull
</code></pre>
<p>Once the command is executed, the schema file (lambdaORM.yaml in this case) will be updated with respect to the data source.</p>
<p>Files created:</p>
<pre><code class="language-sh">├── orm_state
│   ├── default-ddl-20240501T212640369Z-pull-default.sql
│   └── default-model.json
</code></pre>
<p>Content of the generated file <code>default-ddl-20240501T212640369Z-pull-default.sql</code>:</p>
<pre><code class="language-sql">CREATE TABLE Categories (CategoryID INTEGER  AUTO_INCREMENT,CategoryName VARCHAR(15) NOT NULL ,Description TEXT  ,Picture LONGBLOB  ,CONSTRAINT Categories_PK PRIMARY KEY (CategoryID));
CREATE TABLE CustomerCustomerDemo (CustomerID VARCHAR(5) NOT NULL ,CustomerTypeID VARCHAR(10) NOT NULL ,CONSTRAINT CustomerCustomerDemo_PK PRIMARY KEY (CustomerID,CustomerTypeID));
CREATE TABLE CustomerDemographics (CustomerTypeID VARCHAR(10) NOT NULL ,CustomerDesc TEXT  ,CONSTRAINT CustomerDemographics_PK PRIMARY KEY (CustomerTypeID));
CREATE TABLE Customers (CustomerID VARCHAR(5) NOT NULL ,CompanyName VARCHAR(40) NOT NULL ,ContactName VARCHAR(30)  ,ContactTitle VARCHAR(30)  ,Address VARCHAR(60)  ,City VARCHAR(15)  ,Region VARCHAR(15)  ,PostalCode VARCHAR(10)  ,Country VARCHAR(15)  ,Phone VARCHAR(24)  ,Fax VARCHAR(24)  ,CONSTRAINT Customers_PK PRIMARY KEY (CustomerID));
CREATE TABLE EmployeeTerritories (EmployeeID INTEGER NOT NULL ,TerritoryID VARCHAR(20) NOT NULL ,CONSTRAINT EmployeeTerritories_PK PRIMARY KEY (EmployeeID,TerritoryID));
CREATE TABLE Employees (EmployeeID INTEGER  AUTO_INCREMENT,LastName VARCHAR(20) NOT NULL ,FirstName VARCHAR(10) NOT NULL ,Title VARCHAR(30)  ,TitleOfCourtesy VARCHAR(25)  ,BirthDate DATETIME  ,HireDate DATETIME  ,Address VARCHAR(60)  ,City VARCHAR(15)  ,Region VARCHAR(15)  ,PostalCode VARCHAR(10)  ,Country VARCHAR(15)  ,HomePhone VARCHAR(24)  ,Extension VARCHAR(4)  ,Photo LONGBLOB  ,Notes TEXT NOT NULL ,ReportsTo INTEGER  ,PhotoPath VARCHAR(255)  ,Salary DECIMAL(10,4)  ,CONSTRAINT Employees_PK PRIMARY KEY (EmployeeID));
CREATE TABLE `Order Details` (OrderID INTEGER NOT NULL ,ProductID INTEGER NOT NULL ,UnitPrice DECIMAL(10,4) NOT NULL ,Quantity INTEGER NOT NULL ,Discount DECIMAL(10,4) NOT NULL ,CONSTRAINT `Order Details_PK` PRIMARY KEY (OrderID,ProductID));
CREATE TABLE Orders (OrderID INTEGER  AUTO_INCREMENT,CustomerID VARCHAR(5) NOT NULL ,EmployeeID INTEGER NOT NULL ,OrderDate DATETIME  ,RequiredDate DATETIME  ,ShippedDate DATETIME  ,ShipVia INTEGER  ,Freight DECIMAL(10,4)  ,ShipName VARCHAR(40)  ,ShipAddress VARCHAR(60)  ,ShipCity VARCHAR(15)  ,ShipRegion VARCHAR(15)  ,ShipPostalCode VARCHAR(10)  ,ShipCountry VARCHAR(15)  ,CONSTRAINT Orders_PK PRIMARY KEY (CustomerID,EmployeeID,OrderID));
CREATE TABLE Products (ProductID INTEGER  AUTO_INCREMENT,ProductName VARCHAR(40) NOT NULL ,SupplierID INTEGER NOT NULL ,CategoryID INTEGER NOT NULL ,QuantityPerUnit VARCHAR(20)  ,UnitPrice DECIMAL(10,4)  ,UnitsInStock INTEGER  ,UnitsOnOrder INTEGER  ,ReorderLevel INTEGER  ,Discontinued INTEGER NOT NULL ,CONSTRAINT Products_PK PRIMARY KEY (CategoryID,ProductID,SupplierID));
CREATE TABLE Region (RegionID INTEGER NOT NULL ,RegionDescription VARCHAR(50) NOT NULL ,CONSTRAINT Region_PK PRIMARY KEY (RegionID));
CREATE TABLE Shippers (ShipperID INTEGER  AUTO_INCREMENT,CompanyName VARCHAR(40) NOT NULL ,Phone VARCHAR(24)  ,CONSTRAINT Shippers_PK PRIMARY KEY (ShipperID));
CREATE TABLE Suppliers (SupplierID INTEGER  AUTO_INCREMENT,CompanyName VARCHAR(40) NOT NULL ,ContactName VARCHAR(30)  ,ContactTitle VARCHAR(30)  ,Address VARCHAR(60)  ,City VARCHAR(15)  ,Region VARCHAR(15)  ,PostalCode VARCHAR(10)  ,Country VARCHAR(15)  ,Phone VARCHAR(24)  ,Fax VARCHAR(24)  ,HomePage TEXT  ,CONSTRAINT Suppliers_PK PRIMARY KEY (SupplierID));
CREATE TABLE Territories (TerritoryID VARCHAR(20) NOT NULL ,TerritoryDescription VARCHAR(50) NOT NULL ,RegionID INTEGER NOT NULL ,CONSTRAINT Territories_PK PRIMARY KEY (TerritoryID,RegionID));
ALTER TABLE CustomerCustomerDemo ADD CONSTRAINT CustomerCustomerDemo_customerCustomerDemo_FK FOREIGN KEY (CustomerTypeID) REFERENCES CustomerDemographics (CustomerTypeID);
ALTER TABLE CustomerCustomerDemo ADD CONSTRAINT CustomerCustomerDemo_customerCustomerDemo_FK FOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID);
ALTER TABLE EmployeeTerritories ADD CONSTRAINT EmployeeTerritories_employeeTerritories_FK FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID);
ALTER TABLE Employees ADD CONSTRAINT Employees_employees_FK FOREIGN KEY (ReportsTo) REFERENCES Employees (EmployeeID);
ALTER TABLE `Order Details` ADD CONSTRAINT `Order Details_order_FK` FOREIGN KEY (OrderID) REFERENCES Orders (OrderID);
ALTER TABLE `Order Details` ADD CONSTRAINT `Order Details_order_FK` FOREIGN KEY (ProductID) REFERENCES Products (ProductID);
ALTER TABLE Orders ADD CONSTRAINT Orders_orders_FK FOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID);
ALTER TABLE Orders ADD CONSTRAINT Orders_orders_FK FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID);
ALTER TABLE Orders ADD CONSTRAINT Orders_orders_FK FOREIGN KEY (ShipVia) REFERENCES Shippers (ShipperID);
ALTER TABLE Products ADD CONSTRAINT Products_products_FK FOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID);
ALTER TABLE Products ADD CONSTRAINT Products_products_FK FOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID);
ALTER TABLE Territories ADD CONSTRAINT Territories_territories_FK FOREIGN KEY (RegionID) REFERENCES Region (RegionID);
</code></pre>
<p><a href="https://github.com/lambda-orm/lambdaorm-labs/tree/main/labs/cli/11-pull">View lab</a></p>
<h2 id="node">Node</h2>
<pre><code class="language-Typescript">import { Orm } from 'lambdaorm'
(async () =&gt; {
    const workspace = process.cwd()
    const orm = new Orm(workspace)
    try{        
        await orm.helper.fs.removeDir(workspace + '/data')
        const originalSchema = orm.helper.yaml.load(await orm.helper.fs.read(workspace + '/lambdaOrm.yaml'))
        await orm.init(originalSchema)  
        await orm.stage.pull()
    }catch(e){
        console.log(e)
    } finally {
        await orm.end()
    }   
})()
</code></pre>
<p><a href="https://github.com/lambda-orm/lambdaorm-labs/tree/main/labs/node/11-pull">view lab</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
