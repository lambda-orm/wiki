<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Update - LambdaORM Wiki</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">LambdaORM Wiki</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Î»ORM "We don't reinvent the wheel, we improve it"</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Features/" class="nav-link">Features</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Sidebar/" class="nav-link">Sidebar</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Usage/" class="nav-link">Usage</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../function_functions/" class="nav-link">Function functions</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../operator_operators/" class="nav-link">Operator operators</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Queries <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Expression/" class="dropdown-item">Lambda expressions</a>
</li>
                                    
<li>
    <a href="../../Metadata/" class="dropdown-item">Metadata</a>
</li>
                                    
<li>
    <a href="../../Query-Language/" class="dropdown-item">Query Language</a>
</li>
                                    
<li>
    <a href="../../Repository/" class="dropdown-item">Repositories</a>
</li>
                                    
<li>
    <a href="../../Transaction/" class="dropdown-item">Transaction</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Dml</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../BulkInsert/" class="dropdown-item">BulkInsert</a>
</li>
            
<li>
    <a href="../Delete/" class="dropdown-item">Delete</a>
</li>
            
<li>
    <a href="../Insert/" class="dropdown-item">Insert</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Update</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Dql</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../dql/Grouping/" class="dropdown-item">Grouping</a>
</li>
            
<li>
    <a href="../../dql/Include/" class="dropdown-item">Include</a>
</li>
            
<li>
    <a href="../../dql/Join/" class="dropdown-item">Join</a>
</li>
            
<li>
    <a href="../../dql/Select/" class="dropdown-item">Select</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">operatorsAndFunctions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../operatorsAndFunctions/Bitwise/" class="dropdown-item">Bitwise</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Comparison/" class="dropdown-item">Comparison</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Datetime/" class="dropdown-item">Datetime</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Group/" class="dropdown-item">Group</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Logical/" class="dropdown-item">Logical</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Nullable/" class="dropdown-item">Nullable</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Numeric/" class="dropdown-item">Numeric</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/Sort/" class="dropdown-item">Sort</a>
</li>
            
<li>
    <a href="../../operatorsAndFunctions/String/" class="dropdown-item">String</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Schema <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../schema/Schema-Use/" class="dropdown-item">Schema Use</a>
</li>
                                    
<li>
    <a href="../../../schema/Schema/" class="dropdown-item">Schema</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Definition</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../schema/Definition/SchemaDefinition-Composite/" class="dropdown-item">Composite Entity</a>
</li>
            
<li>
    <a href="../../../schema/Definition/SchemaDefinition-EnvironmentVariables/" class="dropdown-item">Environment Variables on Schema</a>
</li>
            
<li>
    <a href="../../../schema/Definition/SchemaDefinition-Expressions/" class="dropdown-item">Expressions on Schema</a>
</li>
            
<li>
    <a href="../../../schema/Definition/SchemaDefinition/" class="dropdown-item">Definition</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Examples</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../schema/Examples/SchemaExample-Basic/" class="dropdown-item">Basic Schema Example</a>
</li>
            
<li>
    <a href="../../../schema/Examples/SchemaExample-Composite/" class="dropdown-item">Composite Entity</a>
</li>
            
<li>
    <a href="../../../schema/Examples/SchemaExample-Extend/" class="dropdown-item">Extend</a>
</li>
            
<li>
    <a href="../../../schema/Examples/SchemaExample-Listener/" class="dropdown-item">Listener on Schema</a>
</li>
            
<li>
    <a href="../../../schema/Examples/SchemaExample-MultiplesStages/" class="dropdown-item">Multiples Stages</a>
</li>
            
<li>
    <a href="../../../schema/Examples/SchemaExample-StageMultiplesSources/" class="dropdown-item">Stage related multiples Sources</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Synchronization</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../schema/Synchronization/SchemaSynchronization-Fetch/" class="dropdown-item">Fetch</a>
</li>
            
<li>
    <a href="../../../schema/Synchronization/SchemaSynchronization-Incorporate/" class="dropdown-item">Incorporate</a>
</li>
            
<li>
    <a href="../../../schema/Synchronization/SchemaSynchronization-Introspect/" class="dropdown-item">Introspect</a>
</li>
            
<li>
    <a href="../../../schema/Synchronization/SchemaSynchronization-Pull/" class="dropdown-item">Pull</a>
</li>
            
<li>
    <a href="../../../schema/Synchronization/SchemaSynchronization-Push/" class="dropdown-item">Push</a>
</li>
            
<li>
    <a href="../../../schema/Synchronization/SchemaSynchronization/" class="dropdown-item">Synchronization</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Insert/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../dql/Grouping/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#update" class="nav-link">Update</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#update-one-entity-complete" class="nav-link">Update one entity complete</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-one-field-of-entity-in-all-records" class="nav-link">Update one field of entity in all records</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-one-field-of-entity-filtered" class="nav-link">Update one field of entity filtered</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-one-field-of-entity-filtered-and-related-entity" class="nav-link">Update one field of entity filtered and related entity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-one-field-of-entity-filtered-and-fields-of-related-entity" class="nav-link">Update one field of entity filtered and fields of related entity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#update-entity-and-multiples-related-entities" class="nav-link">Update entity and multiples related entities</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#code-example" class="nav-link">Code example</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="update">Update</h1>
<p>Since the queries are based on both the expression and the definition in the schema, in the case of wanting to update all the fields it is not necessary to define them since it is assumed if none are defined.</p>
<p>The mapping to the source(s) is resolved according to the mapping configuration associated with each source in the schema.</p>
<h2 id="update-one-entity-complete">Update one entity complete</h2>
<p><strong>Lambda:</strong></p>
<pre><code class="language-Typescript">// Updates all fields of the Orders entity
Orders.update()
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Updates all fields of the Orders entity where OrderID matches the provided parameter
UPDATE Orders o SET 
    CustomerID = ?,
    EmployeeID = ?,
    OrderDate = ?,
    RequiredDate = ?,
    ShippedDate = ?,
    ShipVia = ?,
    Freight = ?,
    ShipName = ?,
    ShipAddress = ?,
    ShipCity = ?,
    ShipRegion = ?,
    ShipPostalCode = ?,
    ShipCountry = ? 
WHERE o.OrderID = ?
</code></pre>
<h2 id="update-one-field-of-entity-in-all-records">Update one field of entity in all records</h2>
<p><strong>Lambda:</strong></p>
<pre><code class="language-Typescript">// Updates the ShipPostalCode field in all records of the Orders entity
Orders.updateAll({ postalCode: postalCode })
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Updates the ShipPostalCode field in all records of the Orders entity
UPDATE Orders o SET ShipPostalCode = ?
</code></pre>
<h2 id="update-one-field-of-entity-filtered">Update one field of entity filtered</h2>
<p><strong>Lambda:</strong></p>
<pre><code class="language-Typescript">// Updates the ShipName field of the Orders entity where OrderID matches the provided entity's ID
Orders.update({ name: entity.name }).filter(p =&gt; p.id === entity.id)
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Updates the ShipName field of the Orders entity where OrderID matches the provided entity's ID
UPDATE Orders o SET ShipName = ? WHERE o.OrderID = ?
</code></pre>
<h2 id="update-one-field-of-entity-filtered-and-related-entity">Update one field of entity filtered and related entity</h2>
<p><strong>Lambda:</strong></p>
<pre><code class="language-Typescript">// Updates the ShipName field of the Orders entity and updates related details
Orders.update({ name: entity.name }).include(p =&gt; p.details(p =&gt; p)).filter(p =&gt; p.id === entity.id)
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Updates the ShipName field of the Orders entity where OrderID matches the provided entity's ID
UPDATE Orders o SET ShipName = ? 
WHERE o.OrderID = ? 

-- Updates UnitPrice, Quantity, and Discount fields in the Order Details table where OrderID and ProductID 
-- match the provided parameters
UPDATE `Order Details` o1 SET UnitPrice = o1.UnitPrice,Quantity = o1.Quantity,Discount = o1.Discount 
WHERE (o1.OrderID = ? AND o1.ProductID = ?)
</code></pre>
<h2 id="update-one-field-of-entity-filtered-and-fields-of-related-entity">Update one field of entity filtered and fields of related entity</h2>
<p><strong>Lambda:</strong></p>
<pre><code class="language-Typescript">// Updates the ShipName field of the Orders entity and updates related details' UnitPrice and ProductID
Orders.update({ name: entity.name })
      .include(p =&gt; p.details(p =&gt; ({ unitPrice: p.unitPrice, productId: p.productId })))
            .filter(p =&gt; p.id === entity.id)
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Updates the ShipName field of the Orders entity where OrderID matches the provided entity's ID
UPDATE Orders o SET ShipName = ?
WHERE o.OrderID = ?

-- Updates UnitPrice and ProductID fields in the Order Details table where OrderID and ProductID 
-- match the provided parameters
UPDATE `Order Details` o1 SET UnitPrice = o1.UnitPrice,ProductID = o1.ProductID 
WHERE (o1.OrderID = ? AND o1.ProductID = ?)
</code></pre>
<h2 id="update-entity-and-multiples-related-entities">Update entity and multiples related entities</h2>
<p><strong>Lambda:</strong></p>
<pre><code class="language-Typescript">// Updates all fields of the Customers entity and includes related orders and details
Customers.update().include(p =&gt; p.orders.include(p =&gt; p.details))
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Updates all fields of the Customers entity where CustomerID matches the provided parameter
UPDATE Customers c SET CustomerID = ?,CompanyName = ?,ContactName = ?,ContactTitle = ?,Address = ?,City = ?,Region = ?,PostalCode = ?,Country = ? 
WHERE c.CustomerID = ? 

-- Updates all fields of the Orders entity where CustomerID matches the provided parameter
UPDATE Orders o SET CustomerID = ?,EmployeeID = ?,OrderDate = ?,RequiredDate = ?,ShippedDate = ?,ShipVia = ?,Freight = ?,ShipName = ?,ShipAddress = ?,ShipCity = ?,ShipRegion = ?,ShipPostalCode = ?,ShipCountry = ? 
WHERE o.OrderID = ? 

-- Updates all fields of the Order Details table where OrderID and ProductID match the provided parameters
UPDATE `Order Details` o1 SET OrderID = ?,ProductID = ?,UnitPrice = ?,Quantity = ?,Discount = ? 
WHERE (o1.OrderID = ? AND o1.ProductID = ?)
</code></pre>
<h2 id="code-example">Code example</h2>
<pre><code class="language-Typescript">import { orm } from '../../lib'
import { Customers } from '../northwind/model/__model'
(async () =&gt; {  
    try {       
        await orm.init('./config/northwind.yaml')
        // entity customer with orders and order details
        const customer = {
            id: 'ALFKI',
            name: 'Alfreds Futterkiste',
            contact: 'Maria Anders',
            phone: 'Sales Representative',
            address: 'Obere Str. 57',
            city: 'Berlin',
            region: null,
            postalCode: '12209',
            country: 'Germany',
            orders: [
                {
                    id: 1,
                    customerId: 'ALFKI',
                    employeeId: 6,
                    orderDate: '1997-08-24T22:00:00.000Z',
                    requiredDate: '1997-09-21T22:00:00.000Z',
                    shippedDate: '1997-09-01T22:00:00.000Z',
                    shipViaId: 1,
                    freight: '29.4600',
                    name: 'Alfreds Futterkiste',
                    address: 'Obere Str. 57',
                    city: 'Berlin',
                    region: null,
                    postalCode: '12209',
                    country: 'Germany',
                    details: [
                        {
                            orderId: 1,
                            productId: 28,
                            unitPrice: '45.6000',
                            quantity: '15.0000',
                            discount: '0.0000'
                        },
                        {
                            orderId: 1,
                            productId: 39,
                            unitPrice: '18.0000',
                            quantity: '21.0000',
                            discount: '0.0000'
                        },
                        {
                            orderId: 1,
                            productId: 46,
                            unitPrice: '12.0000',
                            quantity: '2.0000',
                            discount: '0.0000'
                        }
                    ]
                },
                {
                    id: 2,
                    customerId: 'ALFKI',
                    employeeId: 4,
                    orderDate: '1997-10-02T22:00:00.000Z',
                    requiredDate: '1997-10-30T23:00:00.000Z',
                    shippedDate: '1997-10-12T22:00:00.000Z',
                    shipViaId: 2,
                    freight: '61.0200',
                    name: 'Alfred-s Futterkiste',
                    address: 'Obere Str. 57',
                    city: 'Berlin',
                    region: null,
                    postalCode: '12209',
                    country: 'Germany',
                    details: [
                        {
                            orderId: 2,
                            productId: 63,
                            unitPrice: '43.9000',
                            quantity: '20.0000',
                            discount: '0.0000'
                        }
                    ]
                }
            ]
        }
        // Defining a query to update Customers and include related orders and details
        const query = () =&gt; Customers.update().include(p =&gt; p.orders.include(p =&gt; p.details))
        // Executing the query using the ORM with the specified customer parameter
        const result = await orm.execute(query, customer)
        console.log(JSON.stringify(result, null, 2))        
    } catch (error:any) {
        console.error(error.stack)
    } finally {
        // Ending the ORM connection
        await orm.end()
    }
})()
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
