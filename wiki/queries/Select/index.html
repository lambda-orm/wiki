<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Select - λORM Wiki</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Select";
        var mkdocs_page_input_path = "queries/Select.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> λORM Wiki
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../index.html">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../Features">Features</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../api">Api</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../cli">Cli</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://github.com/lambda-orm/lambdaorm-labs">Labs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Queries</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../Query-Language">Query Language</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Expression">Expression</a>
                  </li>
                  <li class="toctree-l1"><a class="" href=".">Select</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Join">Join</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Grouping">Grouping</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Include">Include</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Insert">Insert</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../BulkInsert">Bulk Insert</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Update">Update</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../Delete">Delete</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../operatorsAndFunctions/OperatorsAndFunctions">Operators & Functions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Schema</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaDefinition">Definition</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaDefinition-Expressions">Expressions</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaDefinition-EnvironmentVariables">Environment Variables</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaDefinition-Composite">Composite</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaExample-Listener">Listeners</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaExample-Basic">Basic</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaExample-Extend">Extend Entity</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaExample-MultiplesStages">Multiples Stages</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaExample-StageMultiplesSources">Stage with Multiples Sources</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaExample-Composite">Entity Composite</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaSynchronization-Push">Push</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaSynchronization-Pull">Pull</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaSynchronization-Fetch">Fetch</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaSynchronization-Introspect">Introspect</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/SchemaSynchronization-Incorporate">Incorporate</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../schema/Schema-Use">Use</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../usage/Repository">Repository</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../usage/Transaction">Transaction</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../usage/Usage">Usage</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../usage/CHANGELOG">Change log</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">λORM Wiki</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Select</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="select">Select</h1>
<p>All queries are based on the schema from which it deduces the fields that an entity contains, primary key, indexes, relationships and constraints.</p>
<p>Therefore, if you want to obtain all the fields of an entity, it is not necessary to specify them.</p>
<h2 id="all-fields-from-entity">All Fields from entity</h2>
<p>Selecting all fields from the Products entity</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- SQL query to select all fields from the Products table
SELECT 
    p.ProductID AS `id`, 
    p.ProductName AS `name`, 
    p.SupplierID AS `supplierId`, 
    p.CategoryID AS `categoryId`, 
    p.QuantityPerUnit AS `quantity`, 
    p.UnitPrice AS `price`, 
    p.UnitsInStock AS `inStock`, 
    p.UnitsOnOrder AS `onOrder`, 
    p.ReorderLevel AS `reorderLevel`, 
    p.Discontinued AS `discontinued` 
FROM 
    Products p  
</code></pre>
<h2 id="one-field">One Field</h2>
<p>Selecting only the 'name' field from the Products entity</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products.map(p =&gt; p.name)
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- SQL query to select only the 'ProductName' field from the Products table
SELECT p.ProductName FROM Products p 
</code></pre>
<h2 id="first">First</h2>
<p>Selecting the first record from the Products entity</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products.first()
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- SQL query to select the first record from the Products table
SELECT 
    p.ProductID AS `id`, 
    p.ProductName AS `name`, 
    p.SupplierID AS `supplierId`, 
    p.CategoryID AS `categoryId`, 
    p.QuantityPerUnit AS `quantity`, 
    p.UnitPrice AS `price`, 
    p.UnitsInStock AS `inStock`, 
    p.UnitsOnOrder AS `onOrder`, 
    p.ReorderLevel AS `reorderLevel`, 
    p.Discontinued AS `discontinued`
FROM Products p  
ORDER BY `id` 
LIMIT 0,1
</code></pre>
<h2 id="last">Last</h2>
<p>Selecting the last record from the Products entity</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products.last()
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- SQL query to select the last record from the Products table
SELECT 
    p.ProductID AS `id`, 
    p.ProductName AS `name`, 
    p.SupplierID AS `supplierId`, 
    p.CategoryID AS `categoryId`, 
    p.QuantityPerUnit AS `quantity`, 
    p.UnitPrice AS `price`, 
    p.UnitsInStock AS `inStock`, 
    p.UnitsOnOrder AS `onOrder`, 
    p.ReorderLevel AS `reorderLevel`, 
    p.Discontinued AS `discontinued` 
FROM Products p  
ORDER BY `id` desc 
LIMIT 0,1 
</code></pre>
<h2 id="take">Take</h2>
<p>Selecting a single record from the Products entity</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products.take()
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- SQL query to select a single record from the Products table
SELECT 
    p.ProductID AS `id`, 
    p.ProductName AS `name`, 
    p.SupplierID AS `supplierId`, 
    p.CategoryID AS `categoryId`, 
    p.QuantityPerUnit AS `quantity`, 
    p.UnitPrice AS `price`, 
    p.UnitsInStock AS `inStock`, 
    p.UnitsOnOrder AS `onOrder`, 
    p.ReorderLevel AS `reorderLevel`, 
    p.Discontinued AS `discontinued` 
FROM Products p  
LIMIT 0,1 
</code></pre>
<h2 id="distinct">Distinct</h2>
<p>Selecting distinct values of quantity and category name from the Products entity</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products
    .distinct(p =&gt; ({ quantity: p.quantity, category: p.category.name }))
    .sort(p =&gt; p.category)
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- SQL query to select distinct values of quantity and category name from the Products table
SELECT DISTINCT p.QuantityPerUnit AS `quantity`, c.CategoryName AS `category` 
FROM Products p 
INNER JOIN Categories c ON c.CategoryID = p.CategoryID 
ORDER BY `category` 
</code></pre>
<h2 id="pagination">Pagination</h2>
<p>Selecting records with price greater than 10, mapping to name and category, sorting by category, and paginating</p>
<p><strong>Lambda:</strong></p>
<pre><code class="language-ts">Products
    .filter(p =&gt; p.price &gt; 10)
    .map(p =&gt; ({ name: p.name, category: p.category.name}))
    .sort(p =&gt; p.category)
    .page(1, 10)
</code></pre>
<p><strong>SQL Result:</strong></p>
<pre><code class="language-sql">-- Selección de productos y categorías por precio unitario
-- Selecciona el nombre del producto y categoría
-- Filtra productos con precio superior a ?
-- Ordena por categoría ascendente
-- Limita a 10 resultados
SELECT 
    p.ProductName AS name, 
    c.CategoryName AS category 
FROM Products p 
INNER JOIN Categories c ON c.CategoryID = p.CategoryID 
WHERE p.UnitPrice &gt; ? 
ORDER BY category asc  
LIMIT 0,10
</code></pre>
<h2 id="usage">Usage</h2>
<h3 id="node">Node</h3>
<pre><code class="language-Typescript">import { orm } from '../../lib'
import { Products } from '../northwind/model/__model'
(async () =&gt; {  
    try {       
        await orm.init('./config/northwind.yaml')
        // Defining a query function that accepts a maximum price parameter
        // Filtering products based on price greater than the maximum price parameter
        // Mapping the results to extract name and category
        // Sorting the results by category
        // Paginating the results to get the first 10 items
        const query = (maxPrice:number) =&gt; Products
                        .filter(p =&gt; p.price &gt; maxPrice)
                        .map(p =&gt; ({ name: p.name, category: p.category.name}))
                        .sort(p =&gt; p.category)
                        .page(1, 10)
        const result = await orm.execute(query, {maxPrice:10})
        console.log(JSON.stringify(result, null, 2))        
    } catch (error:any) {
        console.error(error.stack)
    } finally {
        // Ending the ORM connection
        await orm.end()
    }
})()
</code></pre>
<h3 id="cli">CLI</h3>
<pre><code class="language-bash">lambdaorm execute -q &quot;Products.filter(p=&gt;p.price&gt;10).map(p=&gt;({name:p.name,category:p.category.name})).sort(p=&gt;p.category).page(1, 10)&quot; -d &quot;{\&quot;maxPrice\&quot;:10}&quot;
</code></pre>
<h3 id="service">Service</h3>
<pre><code class="language-bash">curl -X POST &quot;http://localhost:9291/plan?format=beautiful&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;query&quot;: &quot;Products.filter(p=&gt;p.price&gt;10).map(p=&gt;({name:p.name,category:p.category.name})).sort(p=&gt;p.category).page(1, 10)&quot;, &quot;data&quot;: &quot;{\&quot;maxPrice\&quot;:10}&quot; }'
</code></pre>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../extra.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
