<!DOCTYPE html>
<html>
<head>
<title>index.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<p><a href="https://github.com/lambda-orm/wiki/discussions"><img src="https://img.shields.io/badge/Join the community-on GitHub Discussions-blue.svg" alt="Join the community on GitHub Discussions"></a>
<a href="https://join.slack.com/t/nuevoespaciod-xo58767/shared_invite/zt-29ix7pc2r-Wd_ZBWnWRDv_5DM4NPtVhQ"><img src="https://img.shields.io/badge/chat-on slack-orange" alt="Slack"></a>
<a href="https://app.gitter.im/#/room/#lambdaorm-how-to-contribute:gitter.im"><img src="https://badges.gitter.im/lambdaorm/community.svg" alt="Gitter"></a>
<a href="https://discord.com/invite/yXT6XBX2"><img src="https://img.shields.io/badge/chat-on discord-orange" alt="Discord"></a>
<a href="https://github.com/lambda-orm/wiki/wiki"><img src="https://img.shields.io/badge/doc-wiki-yellow" alt="Wiki"></a>
<a href="https://www.npmjs.com/package/lambdaorm"><img src="https://img.shields.io/badge/language-typescript-blue" alt="language typescript"></a>
<a href="https://www.npmjs.com/package/lambdaorm"><img src="https://img.shields.io/badge/npm-10.2.5-green" alt="npm version"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
<a href="https://github.com/semantic-release/semantic-release"><img src="https://img.shields.io/badge/  -semantic--release-e10079.svg" alt="semantic-release"></a>
<a href="https://github.com/lambda-orm/wiki/actions?query=workflow%3A%22publish%22"><img src="https://img.shields.io/badge/Github-CI-red.svg" alt="Github CI"></a>
<a href="https://www.npmjs.com/package/lambdaorm-cli"><img src="https://img.shields.io/badge/Api-CLI-blue.svg" alt="CLI"></a>
<a href="https://github.com/lambda-orm/lambdaorm-svc"><img src="https://img.shields.io/badge/Api-REST-blue.svg" alt="Api REST"></a></p>
<p>位ORM is an ORM that allows us to perform distributed queries on different database engines.</p>
<p>In 位ORM, queries are defined using lambda expressions based on a domain model which abstracts us from the infrastructure. For example, in a query you can obtain or modify records from different entities, where some persist in MySQL, others in Postgres, and others in Mongo.</p>
<p>位ORM allows you to define different scenarios for the same domain. For example, in one scenario, the infrastructure may consist of distributed instances across SQL Server, MongoDB, and Oracle, while in another scenario it may be a single Postgres instance. This allows the <a href="https://microservices.io/patterns/data/cqrs.html">CQRS</a> pattern to be implemented through configuration, without needing to write a single line of code. <a href="https://github.com/lambda-orm/lambdaorm-labs/tree/main/labs/svc/04-northwind-cqrs-with-kafka">view example</a></p>
<p>In addition to being used as a Node.js library, it can be consumed from a command line interface (CLI), a REST service, or a REST service client in other programming languages.</p>
<h2 id="query-language">Query Language</h2>
<p>Example of a query where orders and their details associated with a customer are obtained:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> query = <span class="hljs-function">(<span class="hljs-params">country: <span class="hljs-built_in">string</span></span>) =&gt;</span> Products
    .map(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> ({ category: p.category.name, largestPrice: max(p.price) }))    
    .filter(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> (p.price &gt; <span class="hljs-number">5</span> &amp;&amp; p.supplier.country == country) || (p.inStock &lt; <span class="hljs-number">3</span>))    
    .having(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> max(p.price) &gt; <span class="hljs-number">50</span>)
    .sort(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> desc(p.largestPrice));
<span class="hljs-comment">// Run the query passing the value of the country parameter</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> orm.execute(query, { country: <span class="hljs-string">'ARG'</span> });
</div></code></pre>
<p>In this example:</p>
<ul>
<li>Define a query that returns a list of product categories along with the maximum price of each category.</li>
<li>Filter products based on price and supplier's country or stock availability</li>
<li>Group products by category and calculate the maximum price</li>
<li>Map each product to an object with category name and maximum price</li>
<li>Sort the products by largest price in descending order</li>
</ul>
<p><strong>view:</strong> <a href="https://lambda-orm.github.io/wiki/Query-Language">queries</a> |
<a href="https://lambda-orm.github.io/wiki/Select">select</a> |
<a href="https://lambda-orm.github.io/wiki/Join">join</a> |
<a href="https://lambda-orm.github.io/wiki/Grouping">grouping</a> |
<a href="https://lambda-orm.github.io/wiki/Include">include</a> |
<a href="https://lambda-orm.github.io/wiki/Insert">insert</a> |
<a href="https://lambda-orm.github.io/wiki/BulkInsert">bulkInsert</a> |
<a href="https://lambda-orm.github.io/wiki/Update">update</a> |
<a href="https://lambda-orm.github.io/wiki/Delete">delete</a> |
<a href="https://lambda-orm.github.io/wiki/Repository">repository</a> |
<a href="https://lambda-orm.github.io/wiki/Usage">usage</a> |
<a href="https://lambda-orm.github.io/wiki/Metadata">metadata</a></p>
<h3 id="include">Include</h3>
<p>The include allows us to obtain the entity data and its relationships in the same query. These data may be in different databases. <br>
In this example the query is expressed as a text string. (Which is another alternative to the lambda expression)</p>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> { orm } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../lib'</span>
(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> orm.init(<span class="hljs-string">'./config/northwind.yaml'</span>)
    <span class="hljs-keyword">const</span> query = <span class="hljs-string">`Orders
	.filter(p =&gt; p.id === id)
	.include(p =&gt; 
	  [ p.customer.map(p =&gt; p.name), 
	    p.details
             .include(p =&gt; 
                 p.product
  	          .include(p =&gt; p.category.map(p =&gt; p.name))
		  .map(p =&gt; p.name))
	     .map(p =&gt; [p.quantity, p.unitPrice])
	   ]
         )`</span>
	<span class="hljs-keyword">const</span> params = { id: <span class="hljs-number">102</span> }
	<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> orm.execute(query, params, { stage: <span class="hljs-string">'PostgreSQL'</span> })
	<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">JSON</span>.stringify(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
   } <span class="hljs-keyword">catch</span> (error:<span class="hljs-built_in">any</span>) {
	<span class="hljs-built_in">console</span>.error(error.message)
   } <span class="hljs-keyword">finally</span> {
       <span class="hljs-keyword">await</span> orm.end()
   }
})()
</div></code></pre>
<p><strong>Result:</strong></p>
<pre class="hljs"><code><div>[
  {
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">102</span>,
    <span class="hljs-attr">"customerId"</span>: <span class="hljs-string">"SPLIR"</span>,
    <span class="hljs-attr">"employeeId"</span>: <span class="hljs-number">7</span>,
    <span class="hljs-attr">"orderDate"</span>: <span class="hljs-string">"1996-11-07T23:00:00.000Z"</span>,
    <span class="hljs-attr">"requiredDate"</span>: <span class="hljs-string">"1996-12-05T23:00:00.000Z"</span>,
    <span class="hljs-attr">"shippedDate"</span>: <span class="hljs-string">"1996-11-14T23:00:00.000Z"</span>,
    <span class="hljs-attr">"shipViaId"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"freight"</span>: <span class="hljs-number">8.63</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Split Rail Beer &amp; Ale"</span>,
    <span class="hljs-attr">"address"</span>: <span class="hljs-string">"P.O. Box 555"</span>,
    <span class="hljs-attr">"city"</span>: <span class="hljs-string">"Lander"</span>,
    <span class="hljs-attr">"region"</span>: <span class="hljs-string">"WY"</span>,
    <span class="hljs-attr">"postalCode"</span>: <span class="hljs-string">"82520"</span>,
    <span class="hljs-attr">"country"</span>: <span class="hljs-string">"USA"</span>,
    <span class="hljs-attr">"customer"</span>: {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Split Rail Beer &amp; Ale"</span>
    },
    <span class="hljs-attr">"details"</span>: [
      {
        <span class="hljs-attr">"quantity"</span>: <span class="hljs-number">24</span>,
        <span class="hljs-attr">"unitPrice"</span>: <span class="hljs-number">5.9</span>,
        <span class="hljs-attr">"product"</span>: {
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Tourtire"</span>,
          <span class="hljs-attr">"category"</span>: {
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Meat/Poultry"</span>
          }
        }
      }
    ]
  }
]
</div></code></pre>
<p><strong>more info:</strong> <a href="https://lambda-orm.github.io/wiki/Include">include</a></p>
<h2 id="schema-configuration">Schema Configuration</h2>
<p>Through the schema, you can define entities, enumerations, indexes, unique keys, default values, constraints, mapping, sources, stages, listeners, etc. The schema can be defined in a JSON or YAML format. Conditions or actions are performed using the same <a href="https://www.npmjs.com/package/3xpr">expression language</a> that is used to define queries.</p>
<p><strong>view:</strong>  <a href="https://lambda-orm.github.io/wiki/Schema">schema</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaDefinition">definition</a> |
<a href="https://lambda-orm.github.io/wiki/Schema-Use">use</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaDefinition-Expressions">expressions</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaDefinition-EnvironmentVariables">environment Variables</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaDefinition-Composite">composite</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaExample-Listener">listener</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaExample-MultiplesStages">multiple stages</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaExample-StageMultiplesSources">multiple sources</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaSynchronization-Push">push</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaSynchronization-Pull">pull</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaSynchronization-Fetch">fetch</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaSynchronization-Introspect">introspect</a> |
<a href="https://lambda-orm.github.io/wiki/SchemaSynchronization-Incorporate">incorporate</a></p>
<h2 id="contributing">Contributing</h2>
<p>Would you like to contribute? Read <a href="https://github.com/lambda-orm/wiki/blob/main/CONTRIBUTING.md">our contribution guidelines</a> to learn more. There are many ways to help!</p>
<h2 id="documentation">Documentation</h2>
<p>Full documentation is available in the <a href="https://github.com/lambda-orm/wiki/wiki">Wiki</a>.</p>
<h2 id="all-labs">All Labs</h2>
<p>You can access various labs at <a href="https://github.com/lambda-orm/lambdaorm-labs">lambdaorm labs</a></p>
<h2 id="related-projects">Related projects</h2>
<ul>
<li><a href="https://www.npmjs.com/package/lambdaorm-cli">Lambda ORM CLI</a>: Command line interface for 位ORM</li>
<li><a href="https://github.com/lambda-orm/lambdaorm-svc">Lambda ORM Service</a>: REST service for 位ORM</li>
<li><a href="https://www.npmjs.com/package/lambdaorm-client-node">Client Node</a>: HTTP client for 位ORM</li>
<li><a href="https://github.com/lambda-orm/lambdaorm-client-kotlin">Client Kotlin</a> : HTTP client for 位ORM for Kotlin</li>
<li><a href="https://www.npmjs.com/package/3xpr">3xpr</a>: Extensible expression engine, which allows evaluating mathematical and logical expressions.</li>
</ul>

</body>
</html>
